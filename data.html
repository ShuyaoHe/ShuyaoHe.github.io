<!doctype html>
<html lang = "en">
      <head>
        <meta charset = "UTF-8" />
         <title> My Data </title>
         <link href="style.css" rel = "stylesheet" type ="text/css">
         <!-- <script src="/d3-geomap/vendor/d3.geomap.dependencies.min.js"></script>
         <script src="/d3-geomap/js/d3.geomap.min.js"></script> -->



      </head>
      <body>
<!-- creat menu bar -->
          <!-- <div id = "nav">

           <ul>
             <li><a href = "index.html">HOME</a></li>
             <li><a href = "project.html">PROJECT</a>
             <div class ="owrap">
               <ol>
                 <li>
                   <a href="text.html">PROJECT I</a></li>
                   <a href="project 3.html">PROJECT II</a></li>
                   <a href="d3.html">PROJECT III</a></li>
                   <a href="final.html">FINAL</a></li>
                   <a href="data.html">DATA</a></li>
               </ol>

             </div></li>
             <li><a href = "text.html">CONTACT ME</a></li>
           </ul>
         </div> -->


  <button class="orange">Switch to Transgender Teens</button>



  <svg width="1000" height="600" viewbox="0 0 1200 800">
    <g id = "map" transform= "translate(280 350)"></g>

    <rect id ="intro" x="-80px" y="40px" width="330px" height="1480px" fill="rgb(202,105,24)"></rect>
    <text id ="headline1" x="-50" y="140" font-size="30" font-family="Helvetica" font-weight="bold" fill="white">HOW MANY</text>
    <text id ="headline2" x="-50" y="180" font-size="30" font-family="Helvetica" font-weight="bold" fill="white">TRANSGENDERS</text>
    <text id ="headline3" x="-50" y="220" font-size="30" font-family="Helvetica" font-weight="bold" fill="white">IN AMERICA?</text>
    <rect id ="decobar1" x="-55" y="240" width="280" height="6" fill="white"></rect>
    <text id ="datasource" x="-48" y="280" font-size="20" font-family="Helvetica" fill="white">Datasource: Williams Institute</text>


    <text id ="US" x="630" y="100" font-size="25" font-family="Helvetica" font-weight="bold" fill="black">Population:</text>
    <text id ="USno" x="800" y="100" font-size="50" font-family="Helvetica" font-weight="bold" fill="black">1,397,150</text>
    <text id ="US" x="630" y="180" font-size="25" font-family="Helvetica" font-weight="bold" fill="black">Percentage:</text>
    <text id ="USno" x="800" y="180" font-size="50" font-family="Helvetica" font-weight="bold" fill="black">0.58%</text>




  </svg>

      <a href="index.html" style="position:absolute; left:140px; top:610px; font-size:13px;">>>>>BACK</a>
      <a href="http://tfolkman.github.io/state_map/index.html">Reference</a>
      <div class="usmap">
          <img src = "picture1.png" height = "100">
      </div>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/topojson@3"></script>
<script src="http://d3js.org/colorbrewer.v1.min.js"></script>


<script>

 var stateNames = {

   "AL": "Alabama",
   "AK": "Alaska",
   "AZ": "Arizona",
   "AR": "Arkansas",
   "CA": "California",
   "CO": "Colorado",
   "CT": "Connecticut",
   "DE": "Delaware",
   "FL": "Florida",
   "GA": "Georgia",
   "HI": "Hawaii",
   "ID": "Idaho",
   "IL": "Illinois",
   "IN": "Indiana",
   "IA": "Iowa",
   "KS": "Kansas",
   "KY": "Kentucky",
   "LA": "Louisiana",
   "ME": "Maine",
   "MD": "Maryland",
   "MA": "Massachusetts",
   "MI": "Michigan",
   "MN": "Minnesota",
   "MS": "Mississippi",
   "MO": "Missouri",
   "MT": "Montana",
   "NE": "Nebraska",
   "NV": "Nevada",
   "NJ": "New Jersey",
   "NM": "New Mexico",
   "NY": "New York",
   "NH": "New Hampshire",
   "NC": "North Carolina",
   "ND": "North Dakota",
   "OH": "Ohio",
   "OK": "Oklahoma",
   "OR": "Oregon",
   "PA": "Pennsylvania",
   "RI": "Rhode Island",
   "SC": "South Carolina",
   "SD": "South Dakota",
   "TN": "Tennessee",
   "TX": "Texas",
   "UT":  "Utah",
   "VT": "Vermont",
   "VA": "Virginia",
   "WA": "Washington",
   "WV": "West Virginia",
   "WI": "Wisconsin",
   "WY": "Wyoming"

 };

  var width = 1000, height = 600;

  var svg = d3.select("#map")
    .attr("width", window.innerWidth)
    .attr("height", window.innerHeight);

  var colorScale = d3.scaleLinear()
    .domain([0, 0.002, 0.004, 0.006, 0.008])
    .range(["#FFFDFE","#FFF6E4", "#FFB123", "#E8612D", "#C01803"]);

  // Data Organize //
  d3.queue()
    .defer(d3.json, "us.json")
    .defer(d3.csv, "HowManyTrans.csv")
    .awaitAll(function(error, data){

      var topoData = data[0];

     var transData = data[1];
     var transLookup = {};
      transData.forEach(function(d, i){

        for ( var poop in d){
          var num = +d[poop];
          if (isNaN(num) == false) {
            d[poop] = num;
          }
        }
        transLookup[d.STATE] = d;
      });
    console.log(transData);

// converts Topojson to
    var geoJSON = topojson.feature(topoData, topoData.objects.states);

    var proj = d3.geoAlbersUsa()
      .fitSize([window.innerWidth/1.5, window.innerHeight/1.5], geoJSON);

// creates a path generator
    var path = d3.geoPath()
      .projection(proj);

    var states = svg.selectAll("path")
      .data(geoJSON.features);

      states.enter().append("path")
      .attr("d", function(d) {
        return path(d);
      })
      .attr("fill", function(d) {
        var stateId = d.id;
        var stateName = stateNames[stateId];
        var mydata = transLookup[stateName];
        console.log(stateId, stateName, mydata);
        if (mydata != undefined){
          var color = colorScale(mydata.PERCENT);
          return color;
        }
        else{
          return "#ccc";
        }

      });

    });

  // var format = function(d){
  //   d = d * 1000;
  //   return d3.format(',.02f')(d) + "%";
  // }
  //
  // var map = d3.geomapChoropleth()
  //     .geofile('us.json')
  //     .projection(d3.geoAlbersUsa)
  //     .colors(colorbrewer.YlGnBu[9])
  //     .column('[VA]PERCENT')
  //     .format(format)
  //     .legend(true)
  //     .unitId('fips');
  //
  // d3.csv('HowManyTrans.csv', function(error, data){
  //   d3.select('#map')
  //      .datum(data)
  //      .call(map.draw, map);
  // });

</script>

</body>
</html>
